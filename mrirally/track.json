{
  "version": 2,
  "description": "Mocked MRI Data",
  "indices": [
    {
      "name": "mockmri",
      "body": "index.json"
    }
  ],
  "corpora": [
    {
      "name": "mockmri-corpus",
      "documents": [
        {
          "source-file": "data.json",
          "document-count": 1000000,
          "uncompressed-bytes": 1603275026
        }
      ]
    }
  ],
  "operations": [
    {
      "name": "index",
      "operation-type": "bulk",
      "ingest-percentage": {{ingest_percentage | default(100)}},
      "bulk-size": 1000,
      "ingest-percentage": 100
    },
    {
      "name": "default",
      "operation-type": "search",
      "body": {
        "query": {
          "match_all": {}
        }
      },
      "cache": false
    },
    {
      "name": "default_1k",
      "operation-type": "search",
      "body": {
        "query": {
          "match_all": {}
        }
      },
      "size": 1000,
      "cache": false
    },
    {
      "name": "term",
      "operation-type": "search",
      "body": {
        "query": {
          "term": {
            "BodyPart": "Head"
          }
        }
      }
    },
    {
      "name": "phrase",
      "operation-type": "search",
      "body": {
        "query": {
          "match_phrase": {
            "SystemVendor": "Siemens"
          }
        }
      }
    },
    {
      "name": "range",
      "operation-type": "search",
      "body": {
        "query": {
          "range": {
            "PatientAge": {
              "gte": 50,
              "lt": 60
            }
          }
        }
      }
    },
    {
      "name": "real_query_1",
      "operation-type": "search",
      "body": {
        "query": {
          "bool": {
            "must": [
              {
                "term": {
                  "BodyPart": "Head"
                }
              },
              {
                "term": {
                  "KspacePhaseEnc1": 256
                }
              },
              {
                "term": {
                  "KspacePhaseEnc2": 256
                }
              }
            ]
          }
        }
      }
    },
    {
      "name": "real_query_2",
      "operation-type": "search",
      "body": {
        "query": {
          "bool": {
            "filter": {
              "script": {
                "script": "doc['BrainAge'].value - doc['PatientAge'].value >= 5"
              }
            }
          }
        }
      }
    },
    {
      "name": "real_query_3",
      "operation-type": "search",
      "body": {
        "query": {
          "bool": {
            "must": [
              {
                "term": {
                  "BodyPart": "Head"
                }
              },
              {
                "bool": {
                  "should": [
                    {
                      "bool": {
                        "must": [
                          {
                            "term": {
                              "SystemVendor": "Siemens"
                            }
                          },
                          {
                            "match": {
                              "ProtocolName": "Siemens3"
                            }
                          }
                        ]
                      }
                    },
                    {
                      "bool": {
                        "must": [
                          {
                            "term": {
                              "SystemVendor": "GE"
                            }
                          },
                          {
                            "match": {
                              "ProtocolName": "GE3"
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      }
    }
  ],
  "challenges": [
    {
      "name": "everything-no-throttling",
      "description": "Starting with some basic queries, then proceeding to the actual realistic ones",
      "default": true,
      "schedule": [
        {
          "operation": {
            "operation-type": "delete-index"
          }
        },
        {
          "operation": {
            "operation-type": "create-index"
          }
        },
        {
          "operation": {
            "operation-type": "cluster-health",
            "request-params": {
              "wait_for_status": "green"
            },
            "retry-until-success": true
          }
        },
        {
          "operation": "index"
        },
        {
          "operation": "default",
          "warmup-iterations": 50,
          "iterations": 1000
        },
        {
          "operation": "default_1k",
          "warmup-iterations": 50,
          "iterations": 1000
        },
        {
          "operation": "term",
          "warmup-iterations": 50,
          "iterations": 1000
        },
        {
          "operation": "phrase",
          "warmup-iterations": 50,
          "iterations": 1000
        },
        {
          "operation": "range",
          "warmup-iterations": 50,
          "iterations": 1000
        },
        {
          "operation": "real_query_1",
          "warmup-iterations": 50,
          "iterations": 1000
        },
        {
          "operation": "real_query_2",
          "warmup-iterations": 50,
          "iterations": 1000
        },
        {
          "operation": "real_query_3",
          "warmup-iterations": 50,
          "iterations": 1000
        }
      ]
    }
  ]
}

